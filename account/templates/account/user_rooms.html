{% extends 'base.html' %}


{% block content %}
<br>
<br>

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="card ccard radius-t-0 h-100">
                <div class="position-tl w-102 border-t-3 brc-primary-tp3 ml-n1px mt-n1px"></div>
                <!-- the blue line on top -->

                <div class="card-header pb-3 brc-secondary-l3">
                    <h5 class="card-title mb-2 mb-md-0 text-dark-m3">
                        Your Groups
                    </h5>
                </div>

                <div class="card-body pt-2 pb-1">
                    {% for room in rooms %}
                    <div role="button" class="d-flex flex-wrap align-items-center my-2 bgc-secondary-l4 bgc-h-secondary-l3 radius-1 p-25 d-style">
                        <span class="mr-25 w-4 h-4 overflow-hidden text-center border-1 brc-secondary-m2 radius-round shadow-sm d-zoom-2">
                            <img alt="Alexa's avatar" src="{{ room.room_image.url }}" class="h-4 w-4" />
                        </span>
                        <span class="text-default-d3 text-90 text-600">
                            <a href="{% url 'group_chat' username=room.chat_username %}">{{ room.title }}</a>
                        </span>


                        <span class="ml-auto text-dark-l2 text-nowrap">
                            {% if room.owner == request.user %}
                            <span class="text-80">
                                <a href="{% url 'edit_room' room.chat_username%}">Edit Room</a>
                            </span>
                                <br>
                             <span class="text-80">
                                <a href="{% url 'remove_group' room.chat_username%}">Delete Room</a>
                            </span>
                                <br>
                            <span class="text-80">
                                <a href="{% url 'reset_invite_link' username=room.chat_username %}">Reset Invite Link</a>
                            </span>
                                <br>
                            <input type="button" value="Show Invite link" onclick="onButtonClick({{ forloop.counter}})" />
                                <br>
                            {% else %}
                            <span class="text-80">
                                <a href="{% url 'exit_group' username=room.chat_username %}">Exit group</a>
                            </span>
                                <br>

                            {% endif %}
                            <span class="text-80">
                                Members: {{ room.registered_users.count|add:"1" }}
                            </span>
                            <br>

                        </span>

                    </div>
                        <span class="text-80 hide" id="tt-{{ forloop.counter }}">
                            <a href="">{{ domain }}{{ room.get_absolute_url }}</a>
                        </span>
                    {% endfor %}
                </div>


                <br>
                <div class="card-header pb-3 brc-secondary-l3">
                    <h5 class="card-title mb-2 mb-md-0 text-dark-m3">
                        <a href="{% url 'create_group' %}"><button class="btn btn-primary" type="button">Create a Group</button></a>
                    </h5>
                </div>
            </div>
        </div>

    </div>
</div>


    <style>
    body{
    margin-top:20px;
    background:#eee;
}
.card {
    box-shadow: 0 20px 27px 0 rgb(0 0 0 / 5%);
}
.card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 0 solid rgba(0,0,0,.125);
    border-radius: 1rem;
}
.bgc-h-secondary-l3:hover, .bgc-secondary-l3 {
    background-color: #ebeff1!important;
}
.h-4 {
    height: 2rem;
}
.w-4 {
    width: 2rem;
}
.d-zoom-1, .d-zoom-2, .d-zoom-3, .dh-zoom-1, .dh-zoom-2, .dh-zoom-3 {
    transition: -webkit-transform 180ms;
    transition: transform 180ms;
    transition: transform 180ms,-webkit-transform 180ms;
}
.mr-25, .mx-25 {
    margin-right: .75rem!important;
}

.p-25 {
    padding: .75rem!important;
}
.radius-1 {
    border-radius: .25rem!important;
}
[class*=bgc-h-] {
    transition: background-color .15s;
}

.text-default-d3 {
    color: #416578!important;
}
.font-bolder, .text-600 {
    font-weight: 600!important;
}
.text-90 {
    font-size: .9em!important;
}


.bgc-h-secondary-l4:hover, .bgc-secondary-l4 {
    background-color: #f2f4f6!important;
}
.text-danger-m1 {
    color: #da3636!important;
}
.text-green-m1 {
    color: #2c8d6a!important;
}
.text-95 {
    font-size: .95em!important;
}

.hide{
  display:none;
}
.show{
  display:block;
}
    </style>

    <script>
        function onButtonClick(count){
            document.getElementById('tt-'.concat(count)).className="show"
        }
    </script>



{% endblock %}
